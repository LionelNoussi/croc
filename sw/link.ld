/* Copyright (c) 2024 ETH Zurich and University of Bologna.
 * Licensed under the Apache License, Version 2.0, see LICENSE for details.
 * SPDX-License-Identifier: Apache-2.0
 *
 * Authors:
 * - Paul Scheffler <paulsc@iis.ee.ethz.ch>
 * - Philippe Sauter <phsauter@iis.ee.ethz.ch> 
 */

OUTPUT_ARCH("riscv")
ENTRY(_start)

MEMORY
{
  SRAM     (rwx) : ORIGIN = 0x10000000, LENGTH = 4K
}

SECTIONS
{
  /DISCARD/ : { *(.riscv.attributes) *(.comment) }

  .text._start 0x10000000 : { 
    KEEP(*(.text._start)) 
    KEEP(*(.__interupt_table))
    KEEP(*(.handle_irq_19))  
  } >SRAM
  .text : { *(.text) *(.text.*)} >SRAM
  .data : { *(.data) } >SRAM
  .bss  : { *(.bss COMMON) } >SRAM

  __global_pointer$ = ADDR(.data) + SIZEOF(.data) / 2;
  PROVIDE(__stack_pointer$ = ORIGIN(SRAM) + LENGTH(SRAM));

  status  = 0x03000008;
}